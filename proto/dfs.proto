syntax = "proto3";
option go_package = "./messages";

/* heart beat message with avaliable space + storage + retrievals */
message File {
    string fullpath = 1;
    string checksum = 2;
    uint64 size = 3;
    string action = 4;
    repeated Chunk chunks = 5;
}

message Chunk {
    string fullpath = 1;
    uint64 order = 2;
    string checksum = 3;
    uint64 size = 4;
    bytes content = 5;
    repeated Host hosts = 6;
    string hostname = 7;
}

message Files {
    repeated File files = 1;
}

message Host {
    string name = 1;
    uint32 port = 2;
}

message Hosts {
    repeated Host hosts = 1;
}

message HeartBeat {
    string name = 1;
    uint64 requests = 2;
    uint64 free_space = 3;
}

message Wrapper {
    oneof msg {
        File file = 1;
        Files files = 2;
        Host host = 3;
        Chunk chunk = 4;
        HeartBeat heartbeat = 5;
        Hosts hosts = 6;
    }
}




